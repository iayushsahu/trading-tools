<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prop Firm Consistency Rule Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        background: linear-gradient(
          135deg,
          #0a0a0a 0%,
          #1a1a1a 50%,
          #0a0a0a 100%
        );
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial,
          sans-serif;
      }
      .glass {
        background: rgba(13, 17, 23, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(48, 54, 61, 0.5);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      }
      .glass-light {
        background: rgba(22, 27, 34, 0.6);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(48, 54, 61, 0.3);
      }
      .btn-primary {
        background: linear-gradient(135deg, #20bf6b 0%, #1a9957 100%);
      }

      /* Toggle switch CSS */
      .toggle-container {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .toggle-switch {
        position: relative;
        width: 280px;
        height: 50px;
        background: rgba(22, 27, 34, 0.8);
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid rgba(48, 54, 61, 0.5);
        display: flex;
        align-items: center;
        padding: 4px;
      }

      .toggle-labels {
        position: absolute;
        width: 100%;
        display: flex;
        justify-content: space-between;
        padding: 0 30px;
        pointer-events: none;
        z-index: 1;
      }

      .toggle-label {
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s ease;
        color: rgba(255, 255, 255, 0.4);
      }

      .toggle-label.active {
        color: #000;
      }

      .toggle-slider {
        position: absolute;
        width: calc(50% - 8px);
        height: 42px;
        background: linear-gradient(135deg, #20bf6b 0%, #1a9957 100%);
        border-radius: 21px;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        left: 4px;
        box-shadow: 0 4px 12px rgba(32, 191, 107, 0.4);
      }

      .toggle-switch.aggressive .toggle-slider {
        left: calc(50% + 4px);
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
      }

      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield;
      }
      input[type="range"] {
        -webkit-appearance: none;
        width: 100%;
        height: 8px;
        border-radius: 5px;
        background: rgba(48, 54, 61, 0.5);
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #20bf6b;
        cursor: pointer;
      }
      input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #20bf6b;
        border: none;
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-thumb {
        background: rgba(48, 54, 61, 0.8);
      }
      .custom-scroll {
        scrollbar-width: thin;
        scrollbar-color: #20bf6b rgba(48, 54, 61, 0.5);
      }

      .custom-scroll::-webkit-scrollbar {
        width: 5px;
      }

      .custom-scroll::-webkit-scrollbar-track {
        background: rgba(22, 27, 34, 0.6);
        border-radius: 5px;
      }

      .custom-scroll::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, #20bf6b 0%, #1a9957 100%);
        border-radius: 5px;
      }

      .custom-scroll::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, #1a9957 0%, #158747 100%);
      }
    </style>
  </head>
  <body class="p-4 md:p-6">
    <div class="max-w-6xl mx-auto">
      <!-- Header -->
      <header class="glass rounded-xl p-6 mb-6">
        <h1
          class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-500"
        >
          Consistency Rule Calculator
        </h1>
        <p class="text-gray-400 mt-2">
          Calculate your prop firm consistency rule compliance and trading days
          projection
        </p>
      </header>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Left Side: Input Form -->
        <div class="glass rounded-xl p-6">
          <h2 class="text-2xl font-bold text-green-400 mb-6">
            Account Details
          </h2>
          <form
            id="calculatorForm"
            class="space-y-6"
            autocomplete="off"
            onsubmit="return false;"
          >
            <!-- Account Size -->
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2"
                >Account Size ($)</label
              >
              <input
                type="number"
                id="accountSize"
                required
                step="1"
                value="10000"
                class="w-full bg-black bg-opacity-50 border border-gray-700 rounded-lg px-4 py-3 text-gray-200 focus:outline-none focus:border-green-500 text-lg"
              />
            </div>

            <!-- Payout Amount -->
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2"
                >Payout Amount ($)</label
              >
              <input
                type="number"
                id="payoutAmount"
                required
                step="1"
                value="500"
                class="w-full bg-black bg-opacity-50 border border-gray-700 rounded-lg px-4 py-3 text-gray-200 focus:outline-none focus:border-green-500 text-lg"
              />
            </div>

            <!-- Consistency % Slider -->
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2"
                >Consistency Rule:
                <span id="consistencyValue" class="text-green-400 font-bold"
                  >35</span
                >%</label
              >
              <input
                type="range"
                id="consistencyPercent"
                min="15"
                max="65"
                value="35"
                class="w-full"
              />
              <div class="flex justify-between text-xs text-gray-500 mt-1">
                <span>15%</span><span>65%</span>
              </div>
            </div>

            <!-- Trading Days Slider -->
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2"
                >Trading Days:
                <span id="minDaysValue" class="text-green-400 font-bold"
                  >5</span
                >
                days</label
              >
              <input
                type="range"
                id="minTradingDays"
                min="1"
                max="25"
                value="5"
                class="w-full"
              />
              <div class="flex justify-between text-xs text-gray-500 mt-1">
                <span>1 day</span><span>25 days</span>
              </div>
            </div>

            <!-- Mode Toggle -->
            <div>
              <label
                class="block text-sm font-medium text-gray-300 mb-3 text-center"
              >
                Trading Mode
              </label>
              <div class="toggle-container">
                <div
                  id="toggleSlider"
                  class="toggle-switch"
                  onclick="toggleMode()"
                >
                  <div class="toggle-slider"></div>
                  <div class="toggle-labels">
                    <span class="toggle-label" id="normalLabel">NORMAL</span>
                    <span class="toggle-label" id="aggressiveLabel"
                      >AGGRESSIVE</span
                    >
                  </div>
                </div>
              </div>
              <div class="flex justify-between text-xs text-gray-400 mt-2 px-8">
                <span>Relaxed</span>
                <span>Fast Payout</span>
              </div>
            </div>
          </form>
        </div>

        <!-- Right Side: Results & Chart -->
        <div
          class="glass rounded-xl p-6 max-h-[calc(100vh-180px)] overflow-y-auto custom-scroll"
        >
          <h2 class="text-2xl font-bold text-green-400 mb-6">
            Results & Projection
          </h2>

          <!-- Warning Banner -->
          <div id="warningBanner" class="hidden mb-4">
            <div class="glass-light rounded-lg p-4 border-l-4 border-red-500">
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-red-500 mt-0.5 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  ></path>
                </svg>
                <div>
                  <h3 class="text-red-400 font-semibold mb-2">
                    ‚ö†Ô∏è Consistency Rule Violation
                  </h3>
                  <div class="text-sm text-gray-300" id="warningMessage"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Results -->
          <div id="normalResults" class="">
            <div class="grid grid-cols-2 gap-4 mb-4" id="resultsCards"></div>
            <div class="glass-light rounded-lg p-6 my-6">
              <h3 class="text-lg font-semibold text-green-300 mb-4 text-center">
                Trading Days Projection
              </h3>
              <div class="flex justify-center">
                <canvas id="projectionChart" width="300" height="300"></canvas>
              </div>
            </div>
            <div class="glass-light rounded-lg p-4 mt-6">
              <h3 class="text-sm font-semibold text-green-400 mb-3">
                üìä Summary
              </h3>
              <div
                class="space-y-2 text-sm text-gray-300"
                id="summaryContent"
              ></div>
            </div>
          </div>

          <!-- Placeholder -->
          <div
            id="placeholder"
            class="flex flex-col items-center justify-center h-96 text-center"
          >
            <div class="text-6xl mb-4 animate-pulse">üìä</div>
            <p class="text-gray-400 text-lg">Configure your settings</p>
            <p class="text-gray-500 text-sm mt-2">
              Adjust sliders and see instant results
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // UI/State
      let currentMode = "normal";

      // Element references
      const refs = {
        accountSize: document.getElementById("accountSize"),
        payoutAmount: document.getElementById("payoutAmount"),
        consistencyPercent: document.getElementById("consistencyPercent"),
        minTradingDays: document.getElementById("minTradingDays"),
        minDaysValue: document.getElementById("minDaysValue"),
        consistencyValue: document.getElementById("consistencyValue"),
        warningBanner: document.getElementById("warningBanner"),
        warningMessage: document.getElementById("warningMessage"),
        resultsCards: document.getElementById("resultsCards"),
        summaryContent: document.getElementById("summaryContent"),
        placeholder: document.getElementById("placeholder"),
        normalResults: document.getElementById("normalResults"),
        projectionChart: document.getElementById("projectionChart"),
        toggleSlider: document.getElementById("toggleSlider"),
        normalLabel: document.getElementById("normalLabel"),
        aggressiveLabel: document.getElementById("aggressiveLabel"),
      };

      // Attach real-time event listeners
      [
        refs.accountSize,
        refs.payoutAmount,
        refs.consistencyPercent,
        refs.minTradingDays,
      ].forEach((input) => input.addEventListener("input", updateAll));

      refs.consistencyPercent.addEventListener(
        "input",
        (e) => (refs.consistencyValue.textContent = e.target.value)
      );
      refs.minTradingDays.addEventListener(
        "input",
        (e) => (refs.minDaysValue.textContent = e.target.value)
      );

      function toggleMode() {
        if (currentMode === "normal") {
          currentMode = "aggressive";
          refs.toggleSlider.classList.add("aggressive");
          refs.normalLabel.classList.remove("active");
          refs.aggressiveLabel.classList.add("active");
        } else {
          currentMode = "normal";
          refs.toggleSlider.classList.remove("aggressive");
          refs.normalLabel.classList.add("active");
          refs.aggressiveLabel.classList.remove("active");
        }
        updateAll();
      }

      // Real-time calculation/update logic
      function updateAll() {
        // Get values
        const accountSize = parseFloat(refs.accountSize.value);
        const payoutAmount = parseFloat(refs.payoutAmount.value);
        const consistencyPercent = parseInt(refs.consistencyPercent.value);
        const minTradingDays = parseInt(refs.minTradingDays.value);

        // Basic validation
        if (
          isNaN(accountSize) ||
          isNaN(payoutAmount) ||
          isNaN(consistencyPercent) ||
          isNaN(minTradingDays) ||
          accountSize <= 0 ||
          payoutAmount <= 0 ||
          minTradingDays <= 0 ||
          payoutAmount > accountSize * 10
        ) {
          refs.normalResults.style.display = "none";
          refs.warningBanner.classList.add("hidden");
          refs.placeholder.style.display = "";
          return;
        }

        refs.placeholder.style.display = "none";

        if (currentMode === "normal")
          return showNormalResults(
            accountSize,
            payoutAmount,
            consistencyPercent,
            minTradingDays
          );
        else
          return showAggressiveResults(
            accountSize,
            payoutAmount,
            consistencyPercent,
            minTradingDays
          );
      }

      function showNormalResults(
        accountSize,
        payoutAmount,
        consistencyPercent,
        minTradingDays
      ) {
        const dailyTarget = payoutAmount / minTradingDays;
        const maxAllowed = payoutAmount * (consistencyPercent / 100);
        const dailyPercent = (dailyTarget / accountSize) * 100;
        refs.warningBanner.classList.add("hidden");

        // Consistency rule check
        if (dailyTarget > maxAllowed) {
          const minDaysNeeded = Math.ceil(payoutAmount / maxAllowed);
          const requiredConsistency = Math.ceil(
            (dailyTarget / payoutAmount) * 100
          );
          const maxPayoutPossible = (maxAllowed * minTradingDays).toFixed(2);

          refs.warningMessage.innerHTML = `
            <strong>Cannot achieve payout with current settings!</strong><br><br>
            <div class="space-y-2">
              <div>üìä <strong>Current Setup:</strong></div>
              <div class="ml-4">
                ‚Ä¢ Daily Target: <strong>$${dailyTarget.toFixed(2)}</strong> (${(
            (dailyTarget / payoutAmount) *
            100
          ).toFixed(1)}% of payout)<br>
                ‚Ä¢ Max Allowed: <strong>$${maxAllowed.toFixed(
                  2
                )}</strong> (${consistencyPercent}% consistency rule)<br>
                ‚Ä¢ Trading Days: <strong>${minTradingDays} days</strong>
              </div>
              <div class="mt-3">üéØ <strong>Minimum Trading Days Needed: ${minDaysNeeded} days</strong></div>
              <div class="mt-3">‚úÖ <strong>Choose One Solution:</strong></div>
              <div class="ml-4">
                1. Increase Trading Days to <strong>${minDaysNeeded}+ days</strong><br>
                2. Increase Consistency % to <strong>${requiredConsistency}%+</strong><br>
                3. Switch to <strong>AGGRESSIVE</strong> mode<br>
                4. Reduce Payout Amount to <strong>$${maxPayoutPossible}</strong> or less
              </div>
            </div>
          `;
          refs.normalResults.style.display = "none";
          refs.warningBanner.classList.remove("hidden");
          return;
        }

        refs.warningBanner.classList.add("hidden");
        refs.normalResults.style.display = "";
        refs.resultsCards.innerHTML = `
            <div class="glass-light rounded-lg p-4 result-card">
              <p class="text-xs text-gray-400 mb-1">Trading Days</p>
              <p class="text-2xl font-bold text-green-400">${minTradingDays}</p>
              <p class="text-xs text-green-300 mt-1">100%</p>
            </div>
            <div class="glass-light rounded-lg p-4 result-card">
              <p class="text-xs text-gray-400 mb-1">Daily Target</p>
              <p class="text-2xl font-bold text-green-400">$${dailyTarget.toFixed(
                2
              )}</p>
              <p class="text-xs text-green-300 mt-1">${dailyPercent.toFixed(
                3
              )}% of account</p>
            </div>
        `;
        // Summary
        refs.summaryContent.innerHTML = `
            <div class="flex justify-between"><span>Mode:</span><span class="font-semibold text-green-400">Normal (Relaxed)</span></div>
            <div class="flex justify-between"><span>Total Days:</span><span class="font-semibold">${minTradingDays} days</span></div>
            <div class="flex justify-between"><span>Daily Target:</span><span class="font-semibold">$${dailyTarget.toFixed(
              2
            )}</span></div>
            <div class="flex justify-between"><span>Consistency Check:</span><span class="font-semibold text-green-400">‚úì Pass (${consistencyPercent}%)</span></div>
            <div class="flex justify-between"><span>Total Payout:</span><span class="font-semibold text-green-400">$${payoutAmount.toFixed(
              2
            )}</span></div>
        `;
        drawPieChart(
          minTradingDays,
          dailyTarget,
          dailyTarget,
          accountSize,
          "NORMAL"
        );
      }

      function showAggressiveResults(
        accountSize,
        payoutAmount,
        consistencyPercent,
        minTradingDays
      ) {
        const maxAllowed = payoutAmount * (consistencyPercent / 100);
        const minDaysNeeded = Math.ceil(payoutAmount / maxAllowed);

        if (minTradingDays < minDaysNeeded) {
          const requiredConsistency = Math.ceil((1 / minTradingDays) * 100);
          const maxPayoutPossible = (maxAllowed * minTradingDays).toFixed(2);

          refs.warningMessage.innerHTML = `
            <strong>Cannot achieve payout in ${minTradingDays} day(s)!</strong><br><br>
            <div class="space-y-2">
              <div>üìä <strong>Current Setup:</strong></div>
              <div class="ml-4">
                ‚Ä¢ Payout Target: <strong>$${payoutAmount.toFixed(
                  2
                )}</strong><br>
                ‚Ä¢ Max per Day: <strong>$${maxAllowed.toFixed(
                  2
                )}</strong> (${consistencyPercent}% rule)<br>
                ‚Ä¢ Min Trading Days: <strong>${minTradingDays} days</strong>
              </div>
              <div class="mt-3">üéØ <strong>Minimum Trading Days Needed: ${minDaysNeeded} days</strong></div>
              <div class="mt-3">‚úÖ <strong>Choose One Solution:</strong></div>
              <div class="ml-4">
                1. Increase Min Trading Days to <strong>${minDaysNeeded}+ days</strong><br>
                2. Increase Consistency % to <strong>${requiredConsistency}%+</strong><br>
                3. Reduce Payout Amount to <strong>$${maxPayoutPossible}</strong> or less<br>
                4. Switch to <strong>NORMAL</strong> mode
              </div>
            </div>
          `;
          refs.normalResults.style.display = "none";
          refs.warningBanner.classList.remove("hidden");
          return;
        }

        refs.warningBanner.classList.add("hidden");
        refs.normalResults.style.display = "";
        // Calculate distribution
        const bestDay = payoutAmount * (consistencyPercent / 100);
        const remainingProfit = payoutAmount - bestDay;
        const remainingDays = minTradingDays - 1;
        const otherDaysDaily =
          remainingDays > 0 ? remainingProfit / remainingDays : 0;
        const bestDayPercent = (bestDay / accountSize) * 100;
        const otherDaysPercent = (otherDaysDaily / accountSize) * 100;

        refs.resultsCards.innerHTML = `
            <div class="glass-light rounded-lg p-4 result-card">
              <p class="text-xs text-gray-400 mb-1">Best Day Profit</p>
              <p class="text-2xl font-bold text-blue-400">$${bestDay.toFixed(
                2
              )}</p>
              <p class="text-xs text-blue-300 mt-1">${bestDayPercent.toFixed(
                3
              )}% of account</p>
              <p class="text-xs text-gray-400 mt-1">${consistencyPercent}% of profit</p>
            </div>
            <div class="glass-light rounded-lg p-4 result-card">
              <p class="text-xs text-gray-400 mb-1">Other Days (each)</p>
              <p class="text-2xl font-bold text-blue-400">$${otherDaysDaily.toFixed(
                2
              )}</p>
              <p class="text-xs text-blue-300 mt-1">${otherDaysPercent.toFixed(
                3
              )}% of account</p>
              <p class="text-xs text-gray-400 mt-1">${
                100 - consistencyPercent
              }% of profit</p>
            </div>
            <div class="glass-light rounded-lg p-4 result-card">
              <p class="text-xs text-gray-400 mb-1">Trading Days</p>
              <p class="text-2xl font-bold text-blue-400">${minTradingDays}</p>
              <p class="text-xs text-blue-300 mt-1">100%</p>
            </div>
            <div class="glass-light rounded-lg p-4 result-card">
              <p class="text-xs text-gray-400 mb-1">Aggressive Payout</p>
              <p class="text-2xl font-bold text-blue-400">$${payoutAmount.toFixed(
                2
              )}</p>
              <p class="text-xs text-blue-300 mt-1"> </p>
            </div>
        `;
        // Summary
        refs.summaryContent.innerHTML = `
            <div class="flex justify-between"><span>Mode:</span><span class="font-semibold text-blue-400">Aggressive (Fast)</span></div>
            <div class="flex justify-between"><span>Best Day:</span><span class="font-semibold">$${bestDay.toFixed(
              2
            )}</span></div>
            <div class="flex justify-between"><span>Other ${remainingDays} Days:</span><span class="font-semibold">$${otherDaysDaily.toFixed(
          2
        )}/day</span></div>
            <div class="flex justify-between"><span>Complete In:</span><span class="font-semibold">${minTradingDays} days</span></div>
            <div class="flex justify-between"><span>Consistency Check:</span><span class="font-semibold text-green-400">‚úì Pass (${consistencyPercent}%)</span></div>
            <div class="flex justify-between"><span>Total Payout:</span><span class="font-semibold text-green-400">$${payoutAmount.toFixed(
              2
            )}</span></div>
        `;
        drawPieChart(
          minTradingDays,
          bestDay,
          otherDaysDaily,
          accountSize,
          "AGGRESSIVE"
        );
      }

      // Minimal canvas pie chart for visual
      function drawPieChart(
        totalDays,
        firstDayValue,
        otherDaysValue,
        accountSize,
        mode
      ) {
        const canvas = refs.projectionChart;
        const ctx = canvas.getContext("2d"),
          centerX = canvas.width / 2,
          centerY = canvas.height / 2,
          outerRadius = 130,
          innerRadius = 80;
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const firstDayColor = mode === "NORMAL" ? "#20bf6b" : "#20bf6b";
        const otherColors = [
          "#3498db",
          "#e67e3c",
          "#9b59b6",
          "#1abc9c",
          "#34495e",
          "#e67e22",
          "#2ecc71",
        ];
        const anglePerDay = (2 * Math.PI) / totalDays;
        let currentAngle = -0.5 * Math.PI;
        // First day
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(
          centerX,
          centerY,
          outerRadius,
          currentAngle,
          currentAngle + anglePerDay
        );
        ctx.closePath();
        ctx.fillStyle = firstDayColor;
        ctx.fill();
        ctx.strokeStyle = "#0a0a0a";
        ctx.lineWidth = 2;
        ctx.stroke();
        currentAngle += anglePerDay;
        // Other days
        for (let i = 1; i < totalDays; i++) {
          ctx.beginPath();
          ctx.moveTo(centerX, centerY);
          ctx.arc(
            centerX,
            centerY,
            outerRadius,
            currentAngle,
            currentAngle + anglePerDay
          );
          ctx.closePath();
          ctx.fillStyle = otherColors[i % otherColors.length];
          ctx.fill();
          ctx.strokeStyle = "#0a0a0a";
          ctx.lineWidth = 2;
          ctx.stroke();
          currentAngle += anglePerDay;
        }
        // Inner Circle
        ctx.beginPath();
        ctx.arc(centerX, centerY, innerRadius, 0, 2 * Math.PI);
        ctx.fillStyle = "rgba(13,17,23,0.95)";
        ctx.fill();
        ctx.strokeStyle = "#30363d";
        ctx.lineWidth = 3;
        ctx.stroke();
        // Text
        ctx.fillStyle = "#20bf6b";
        ctx.font = "bold 18px Arial";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText(
          "$" + (accountSize / 1000).toFixed(0) + "K",
          centerX,
          centerY - 15
        );
        ctx.fillStyle = mode === "NORMAL" ? "#20bf6b" : "#3498db";
        ctx.font = "bold 20px Arial";
        ctx.fillText(mode, centerX, centerY + 15);
      }

      // Set initial state
      refs.normalLabel.classList.add("active");

      // Initial call
      updateAll();
    </script>
  </body>
</html>
